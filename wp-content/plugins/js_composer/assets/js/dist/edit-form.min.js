if(_.isUndefined(window.vc))var vc={atts:{}};if(function(e){var t=Backbone.View.extend({events:{},$lg_offset_placeholder_value:!1,$lg_size_placeholder_value:!1,initialize:function(){_.bindAll(this,"setLgPlaceholders")},render:function(){return this},save:function(){var t=[];return this.$el.find(".vc_column_offset_field").each(function(){var a=e(this);a.is(":checkbox:checked")?t.push(a.attr("name")):a.is("select")&&""!==a.val()&&t.push(a.val())}),t},setLgPlaceholders:function(){var e=this.$lg_offset_placeholder_value.val().replace(/[^\d]/g,"");this.$lg_size.find("option:first").text(VcI8nColumnOffsetParam.inherit_default),this.$lg_offset.find("option:first").text(e?VcI8nColumnOffsetParam.inherit+e:"")}});vc.atts.column_offset={parse:function(e){return this.content().find("input.wpb_vc_param_value."+e.param_name).data("vcColumnOffset").save().join(" ")},init:function(a,i){e('[data-column-offset="true"]',i).each(function(){var a=e(this);a.find(".wpb_vc_param_value").data("vcColumnOffset",new t({el:a}).render())})}}}(window.jQuery),_.isUndefined(window.vc))var vc={atts:{}};if(function(e){function t(){var e={bg_color:"background-color",padding:"padding",margin_bottom:"margin-bottom",bg_image:"background-image"},t=vc.edit_element_block_view.model.get("params"),a=_.reduce(e,function(e,a,i){var n=t[i];return _.isUndefined(n)||!n.length?e:("bg_image"===i&&(n="url("+n+")"),e+a+": "+n+";")},"",this);return a?".tmp_class{"+a+"}":""}function a(t,a){var n;n=[],e(".media-modal").addClass("processing-media"),t.each(function(e){n.push(e.get("id"))}),i(n,function(i){if(!window.vc||!window.vc.active_panel)return!1;var n,r;n=_.map(i,function(e){return e.attributes}),t.reset(n),r=_.map(t.models,function(e){return e.attributes});var s=vc.template(e("#vc_css-editor-image-block").html(),_.defaults({},{variable:"img"},vc.templateOptions.custom));a._css_editor.$el.find(".vc_background-image .vc_image").html(s(r[0])),e(".media-modal").removeClass("processing-media")})}function i(t,a){e.ajax({dataType:"json",type:"POST",url:window.ajaxurl,data:{action:"vc_media_editor_add_image",filters:window.vc_selectedFilters,ids:t,vc_inline:!0,_vcnonce:window.vcAdminNonce}}).done(function(t){var i,n,r,s;if("function"==typeof a){for(i=[],r=[],s=0;s<t.data.ids.length;s++)n=wp.media.model.Attachment.get(t.data.ids[s]),r.push(n.fetch()),i.push(n);e.when.apply(e,r).done(function(){a(i)})}}).fail(function(t){e(".media-modal-close").click(),window.vc&&window.vc.active_panel&&window.i18nLocale&&window.i18nLocale.error_while_saving_image_filtered&&vc.active_panel.showMessage(window.i18nLocale.error_while_saving_image_filtered,"error"),window.console&&window.console.error&&window.console.error(t)}).always(function(){e(".media-modal").removeClass("processing-media")})}var n=wp.media,r=ajaxurl.replace(/admin\-ajax\.php/,"images/wpspin_light.gif");n.controller.VcCssSingleImage=n.controller.VcSingleImage.extend({setCssEditor:function(e){return e&&(this._css_editor=e),this},updateSelection:function(){var e,t=this.get("selection"),a=this._css_editor.getBackgroundImage();void 0!==a&&""!==a&&-1!==a&&(e=_.map(a.toString().split(/,/),function(e){var t=wp.media.model.Attachment.get(e);return t.fetch(),t})),t.reset(e)}});var s;s=vc.CssEditor=Backbone.View.extend({attrs:{},layouts:["margin","border-width","padding"],positions:["top","right","bottom","left"],$field:!1,simplify:!1,$simplify:!1,events:{"click .vc_icon-remove":"removeImage","click .vc_add-image":"addBackgroundImage","change .vc_simplify":"changeSimplify"},initialize:function(){_.bindAll(this,"setSimplify")},render:function(e){return this.attrs={},this.$simplify=this.$el.find(".vc_simplify"),_.isString(e)&&this.parse(e),this},parse:function(e){var t=e.split(/\s*(\.[^\{]+)\s*\{\s*([^\}]+)\s*\}\s*/g);t[2]&&this.parseAtts(t[2].replace(/\s+!important/g,""))},addBackgroundImage:function(e){if(e.preventDefault(),window.vc_selectedFilters={},this.image_media)return this.image_media.open("vc_editor");this.image_media=n({state:"vc_single-image",states:[(new n.controller.VcCssSingleImage).setCssEditor(this)]}),this.image_media.on("toolbar:create:vc_single-image",function(e){this.createSelectToolbar(e,{text:window.i18nLocale.set_image})},this.image_media),this.image_media.state("vc_single-image").on("select",this.setBgImage),this.image_media.open("vc_editor")},setBgImage:function(){a(this.get("selection"),this)},setCurrentBgImage:function(t){var a,i,n=/([^\?]+)(\?id=\d+){0,1}/,s="",c="";t.match(/^\d+$/)?(i=vc.template(e("#vc_css-editor-image-block").html(),_.defaults({},{variable:"img"},vc.templateOptions.custom)),this.$el.find(".vc_background-image .vc_image").html(i({url:r,id:t,css_class:"vc_preview"})),e.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:t,size:"full",_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(e){this.$el.find(".vc_ce-image").attr("src",e+"?id="+t).removeClass("vc_preview")})):t.match(n)&&(a=t.split(n),s=a[1],a[2]&&(c=a[2].replace(/[^\d]+/,"")),i=vc.template(e("#vc_css-editor-image-block").html(),_.defaults({},{variable:"img"},vc.templateOptions.custom)),this.$el.find(".vc_background-image .vc_image").html(i({url:s,id:c})))},changeSimplify:function(){var e=_.debounce(this.setSimplify,100);e&&e()},setSimplify:function(){this.simplifiedMode(this.$simplify[0].checked)},simplifiedMode:function(t){t?(this.simplify=!0,this.$el.addClass("vc_simplified")):(this.simplify=!1,this.$el.removeClass("vc_simplified"),_.each(this.layouts,function(t){"border-width"===t&&(t="border");var a=e("[data-attribute="+t+"].vc_top");this.$el.find("[data-attribute="+t+"]:not(.vc_top)").val(a.val())},this))},removeImage:function(t){var a=e(t.currentTarget);t.preventDefault(),a.parent().remove()},getBackgroundImage:function(){return this.$el.find(".vc_ce-image").data("imageId")},parseAtts:function(e){var t,a,i;t=/(\d+\S*)\s+(\w+)\s+([\d\w#\(,]+)/,a=/^([^\s]+)\s+url\(([^\)]+)\)([\d\w]+\s+[\d\w]+)?$/,i=!1,_.map(e.split(";"),function(e){var n,r,s,c=e.split(/:\s/),o=c[1]||"",l=c[0]||"";o&&(o=o.trim()),l.match(new RegExp("^("+this.layouts.join("|").replace("-","\\-")+")$"))&&o?(n=o.split(/\s+/g),1===n.length?n=[n[0],n[0],n[0],n[0]]:2===n.length?(n[2]=n[0],n[3]=n[1]):3===n.length&&(n[3]=n[1]),_.each(this.positions,function(e,t){this.$el.find("[data-name="+l+"-"+e+"]").val(n[t])},this)):"background-size"===l?(i=o,this.$el.find("[name=background_style]").val(o)):"background-repeat"!==l||i?"background-image"===l?this.setCurrentBgImage(o.replace(/url\(([^\)]+)\)/,"$1")):"background"===l&&o?((s=o.split(a))[1]&&this.$el.find("[name="+l+"_color]").val(s[1]),s[2]&&this.setCurrentBgImage(s[2])):"border"===l&&o&&o.match(t)?(r=o.split(t),n=[r[1],r[1],r[1],r[1]],_.each(this.positions,function(e,t){this.$el.find("[name="+l+"_"+e+"_width]").val(n[t])},this),this.$el.find("[name=border_style]").val(r[2]),this.$el.find("[name=border_color]").val(r[3]).trigger("change")):-1!=l.indexOf("border")&&o?-1!=l.indexOf("style")?this.$el.find("[name=border_style]").val(o):-1!=l.indexOf("color")?this.$el.find("[name=border_color]").val(o).trigger("change"):-1!=l.indexOf("radius")?this.$el.find("[name=border_radius]").val(o):l.match(/^[\w\-\d]+$/)&&this.$el.find("[name="+l.replace(/\-+/g,"_")+"]").val(o):l.match(/^[\w\-\d]+$/)&&o&&this.$el.find("[name="+l.replace(/\-+/g,"_")+"]").val(o):this.$el.find("[name=background_style]").val(o)},this)},save:function(){var e="";return this.attrs={},_.each(this.layouts,function(e){this.getFields(e)},this),this.getBackground(),this.getBorder(),_.isEmpty(this.attrs)||(e=".vc_custom_"+Date.now()+"{"+_.reduce(this.attrs,function(e,t,a){return t?e+a+": "+t+" !important;":e},"",this)+"}"),e&&vc.frame_window&&vc.frame_window.vc_iframe.setCustomShortcodeCss(e),e},getBackgroundImageSrc:function(){return this.$el.find(".vc_background-image img").attr("src")},getBackgroundColor:function(){return this.$el.find("[name=background_color]").val()},getBackgroundStyle:function(){return this.$el.find("[name=background_style]").val()},getBackground:function(){var e=this.getBackgroundColor(),t=this.getBackgroundImageSrc(),a=this.getBackgroundStyle();e&&t?this.attrs.background=e+" url("+t+")":e?this.attrs["background-color"]=e:t&&(this.attrs["background-image"]="url("+t+")"),a.match(/repeat/)?(this.attrs["background-position"]="0 0",this.attrs["background-repeat"]=a):a.match(/cover|contain/)&&(this.attrs["background-position"]="center",this.attrs["background-repeat"]="no-repeat",this.attrs["background-size"]=a),e.match(/^rgba/)&&(this.attrs["*background-color"]=e.replace(/\s+/,"").replace(/(rgb)a\((\d+)\,(\d+),(\d+),[^\)]+\)/,"$1($2,$3,$4)"))},getBorder:function(){var e=this.$el.find("[name=border_style]").val(),t=this.$el.find("[name=border_radius]").val(),a=this.$el.find("[name=border_color]").val(),i=["left","right","top","bottom"];e&&a&&this.attrs["border-width"]&&this.attrs["border-width"].match(/^\d+\S+$/)?(this.attrs.border=this.attrs["border-width"]+" "+e+" "+a,this.attrs["border-width"]=void 0,t&&(this.attrs["border-radius"]=t)):(_.each(i,function(t){this.attrs["border-"+t+"-width"]&&(a&&(this.attrs["border-"+t+"-color"]=a),e&&(this.attrs["border-"+t+"-style"]=e))},this),t&&(this.attrs["border-radius"]=t))},getFields:function(e){var t=[];if(this.simplify)return this.getSimplifiedField(e);_.each(this.positions,function(a){var i=this.$el.find("[data-name="+e+"-"+a+"]").val().replace(/\s+/,"");i.match(/^-?\d*(\.\d+){0,1}(%|in|cm|mm|em|rem|ex|pt|pc|px|vw|vh|vmin|vmax)$/)||(i=isNaN(parseFloat(i))?"":parseFloat(i)+"px"),i.length&&t.push({name:a,val:i})},this),_.each(t,function(t){var a="border-width"===e?"border-"+t.name+"-width":e+"-"+t.name;this.attrs[a]=t.val},this)},getSimplifiedField:function(e){var t=this.$el.find("[data-name="+e+"-top]").val().replace(/\s+/,"");t.match(/^-?\d*(\.\d+){0,1}(%|in|cm|mm|em|rem|ex|pt|pc|px|vw|vh|vmin|vmax)$/)||(t=isNaN(parseFloat(t))?"":parseFloat(t)+"px"),t.length&&(this.attrs[e]=t)}}),vc.atts.css_editor={parse:function(e){var t;return t=this.content().find('input.wpb_vc_param_value[name="'+e.param_name+'"]'),t.data("vcFieldManager").save()},init:function(a,i){e("[data-css-editor=true]",this.content()).each(function(){var i=e(this),n=i.find('input.wpb_vc_param_value[name="'+a.param_name+'"]'),r=n.val();r||(r=t()),n.data("vcFieldManager",new s({el:i}).render(r))}),vc.atts.colorpicker.init.call(this,a,i)}}}(window.jQuery),_.isUndefined(window.vc))var vc={atts:{}};if(function(e){var t=Backbone.View.extend({events:{change:"setParams"},setParams:function(){var e,t=this.save(),a=this.$el.find('[value="'+t+'"]'),i=vc.edit_element_block_view.content(),n=this.$el;if(a.length){e=a.data("params");var r=[];_.each(e,function(e,t,a){var n,s=i.find("[name="+t+"].wpb_vc_param_value");s.length&&(s.unbind("change.vcParamsPreset"),(n=s.data("vcFieldManager"))&&n.render&&n.render(e),r.push(s),s.val(e).trigger("change"))}),_.each(r,function(e,t){e.bind("change.vcParamsPreset",function(e){_.isUndefined(e.extra_type)&&n.val("")})})}},render:function(){return this.setParams(),this},save:function(){return this.$el.val()}});vc.atts.params_preset={parse:function(t){return e("select[name="+t.param_name+"]",this.content()).val()},init:function(a,i){e(".vc_params-preset-select",i).each(function(){var a=e(this);_.isUndefined(a.data("fieldManager"))&&a.data("fieldManager",new t({el:a}).render())})}}}(window.jQuery),function(e){new function(){e(".gallery_widget_attached_images_list",this.$view).unbind("click.removeImage").on("click.removeImage","a.vc_icon-remove",function(t){t.preventDefault();var a=e(this).closest(".edit_form_line");e(this).parent().remove();var i=[];a.find(".added img").each(function(){i.push(e(this).attr("rel"))}),a.find(".gallery_widget_attached_images_ids").val(i.join(",")).trigger("change")}),e(".gallery_widget_attached_images_list").each(function(t){var a=e(this);a.sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder-gallery",cursor:"move",items:"li",update:function(){var t=[];e(this).find(".added img").each(function(){t.push(e(this).attr("rel"))}),a.closest(".edit_form_line").find(".gallery_widget_attached_images_ids").val(t.join(",")).trigger("change")}})})};var t=e("#vc_edit-form-tabs");t.length&&(e(".wpb-edit-form").addClass("vc_with-tabs"),t.find(".vc_edit-form-tab-control").removeClass("vc_active").eq(0).addClass("vc_active"),t.find('[data-vc-ui-element="panel-edit-element-tab"]').removeClass("vc_active").eq(0).addClass("vc_active"),t.find(".vc_edit-form-link").click(function(a){var i=e(this);a.preventDefault(),t.find(".vc_active").removeClass("vc_active"),i.parent().addClass("vc_active"),e(i.attr("href")).addClass("vc_active").parents(".vc_panel-body").scrollTop(0)})),e(".vc_ui-panel .additembutton").click(function(){var t=e(this).parent().parent().next().find(".listitemwindow");t.css({display:"block",top:"220px"}),t.find("[name='item_type']").val("items"),t.find("[name='item_value'], [name='item_content'], [name='item_url'], [name='item_content_color'], [name='item_value_color'], [name='item_value_background_color'], [name='item_border_color']").val(""),t.draggable({handle:e(".vc_panel-heading")}),t.resizable({handles:"n, e, s, w, ne, se, sw, nw"})}),e(".cancel-item-options, .listitemwindow .vc_close").click(function(t){t.preventDefault(),e(".listitemwindow").css("display","none")}),e("#add-item-shortcode").click(function(t){t.preventDefault();var a=window.tinyMCE.get("wpb_tinymce_content"),i=a.getContent(),n=e("[name='additemwindow'] [name='item_content_color']"),r=e("[name='additemwindow'] [name='item_value_color']"),s=e("[name='additemwindow'] [name='item_value_background_color']"),c=e("[name='additemwindow'] [name='item_border_color']"),o="[item"+(e("[name='additemwindow'] [name='item_type']").length?' type="'+e("[name='additemwindow'] [name='item_type']").val()+'"':"")+(e("[name='additemwindow'] [name='item_value']").length?' value="'+e("[name='additemwindow'] [name='item_value']").val()+'"':"")+(e("[name='additemwindow'] [name='item_url']").length?' url="'+e("[name='additemwindow'] [name='item_url']").val()+'"':"")+(e("[name='additemwindow'] [name='item_url_target']").length?' url_target="'+e("[name='additemwindow'] [name='item_url_target']").val()+'"':"")+(e("[name='additemwindow'] [name='item_icon']").length?' icon="'+e("[name='additemwindow'] [name='item_icon']").val()+'"':"")+(""!=n.length?' text_color="'+n.val()+'"':"")+(""!=r.length?' value_color="'+r.val()+'"':"")+(""!=s.length?' value_bg_color="'+s.val()+'"':"")+(""!=c.length?' border_color="'+c.val()+'"':"")+"]"+e("[name='additemwindow'] [name='item_content']").val()+"[/item]";a.setContent(e(i).text()+o),e(".listitemwindow").css("display","none")}),e(".gallery_widget_attached_images_ids").change(function(){var t=e(this).val().split(","),a=0;parseInt(t[0])&&(a=t.length);var i=e(this).hasClass("carousel_images")?5:e(this).hasClass("slider_images")?3:4,n=e(".wpb_el_type_attach_images").nextAll();n.slice(0,30*i+1).css("display","none"),a&&(n.slice(0,a*i).css("display","block"),n.slice(30*i,30*i+1).css("display","block"))}),setTimeout(function(){e(".gallery_widget_attached_images_ids").trigger("change")},1),e(".vc_ui-panel [name^='testimonials_icon'], .vc_ui-panel [name^='testimonials_title'], .vc_ui-panel [name^='testimonials_author'], .vc_ui-panel [name^='testimonials_author_subtext']").parent().parent().css("display","none"),e(".vc_ui-panel [name='testimonials_count']").change(function(){var t=e(this),a=e(".vc_ui-panel [name$='29']").length;e(".vc_ui-panel [name^='testimonials_icon'], .vc_ui-panel [name^='testimonials_title'], .vc_ui-panel [name^='testimonials_author'], .vc_ui-panel [name^='testimonials_author_subtext']").parent().parent().css("display","none"),t.parent().parent().nextUntil("",":lt("+t.val()*a+")").css("display","block")}),setTimeout(function(){e("[name='testimonials_count']").trigger("change")},1),e(".vc_ui-panel [name^='icon_type'], .vc_ui-panel [name^='icon_url'], .vc_ui-panel [name^='icon_target']").parent().parent().css("display","none"),e(".vc_ui-panel [name='icons_count']").change(function(){var t=e(this);e(".vc_ui-panel [name^='icon_type'], .vc_ui-panel [name^='icon_url'], .vc_ui-panel [name^='icon_target']").parent().parent().css("display","none"),t.parent().parent().nextUntil("",":lt("+3*t.val()+")").css("display","block")}),setTimeout(function(){e("[name='icons_count']").trigger("change")},1)}(window.jQuery),_.isUndefined(window.vc))var vc={atts:{}};!function(e){"use strict";vc.atts.vc_grid_item={init:function(t,a){!0===vc_user_access().getState("grid_builder")||null===vc_user_access().getState("grid_builder")?this.content().find('[data-vc-shortcode-param-name="'+t.param_name+'"] [data-vc-grid-element="value"]').change(function(){var a=e(this).val(),i=e(this).find("[value="+a+"]").data("vcLink");a&&e(this).parents('[data-vc-shortcode-param-name="'+t.param_name+'"]:first').find('[data-vc-grid-item="edit_link"]').attr("href",i)}).trigger("change"):this.content().find('[data-vc-shortcode-param-name="'+t.param_name+'"] .vc_description').remove()},parse:function(e){var t=this.content().find('[data-vc-shortcode-param-name="'+e.param_name+'"] [data-vc-grid-element="value"]');return t.length?t.val():""}}}(window.jQuery);